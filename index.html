<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Bambi</title>
    <style>
        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: #000; color: white;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            height: 100vh;
        }

        /* –§–æ–Ω —Å —á–µ—Ä–Ω—ã–º–∏ —Å–µ—Ä–¥—Ü–∞–º–∏ */
        .heart-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; background: #000; overflow: hidden;
        }

        .falling-heart {
            position: absolute; color: #222; font-size: 20px;
            animation: float 8s linear infinite;
        }

        @keyframes float {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        /* –®–ª–µ–π—Ñ —Å–µ—Ä–¥–µ—Ü */
        .cursor-heart {
            position: fixed; color: #ff4d6d; pointer-events: none;
            z-index: 999; animation: fadeUp 1s forwards; font-size: 20px;
        }
        @keyframes fadeUp { to { transform: translateY(-50px) scale(1.5); opacity: 0; } }

        .container {
            text-align: center; background: rgba(255, 255, 255, 0.1);
            padding: 25px; border-radius: 20px; backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 85%; max-width: 400px; z-index: 10;
            max-height: 90vh; overflow-y: auto;
            scrollbar-width: none;
        }
        .container::-webkit-scrollbar { display: none; }

        .hidden { display: none !important; }
        h1, h2 { color: #ff4d6d; margin-bottom: 20px; }

        button {
            padding: 15px 25px; font-size: 1.1rem; border: none; border-radius: 50px;
            cursor: pointer; transition: 0.3s; font-weight: bold;
        }

        #yesBtn { background-color: #ff4d4d; color: white; }
        #yesBtn:hover { transform: scale(1.1); box-shadow: 0 0 15px #ff4d4d; }

        #noBtn { 
            background-color: #555; 
            color: white; 
            /* initial layout, inline with Yes button */
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∑–∞–¥–∞–Ω–∏–π */
        .task-btn {
            display: block; width: 100%; background-color: transparent;
            border: 2px solid #ff4d6d; color: white; margin: 15px 0;
            transition: 0.3s;
        }
        .task-btn:hover:not(:disabled) {
            background-color: #ff4d6d;
            box-shadow: 0 0 10px #ff4d6d;
        }
        .task-btn:disabled {
            border-color: #333; color: #555; cursor: not-allowed;
        }

        .done-btn { background: white; color: black; width: 100%; }
        .done-btn:hover { background: #eee; }

        .task-img { width: 100%; max-height: 250px; border-radius: 15px; margin: 10px 0; object-fit: cover; }

        #timer { font-size: 1rem; color: #ff4d6d; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="heart-bg" id="heartBg"></div>

    <div id="page1" class="container">
        <h1>Will you be my valentine, Bambi?</h1>
        <div class="buttons-row">
            <button id="yesBtn">Yes</button>
            <button id="noBtn">No</button>
        </div>
    </div>

    <div id="page2" class="container hidden">
        <h2 class="typewriter" data-text="To receive your main gift, you must complete 3 tasks:"></h2>
        <button id="btnTask1" class="task-btn" onclick="showTask(1)">Love is...</button>
        <button id="btnTask2" class="task-btn" onclick="showTask(2)" disabled>Love is...</button>
        <button id="btnTask3" class="task-btn" onclick="showTask(3)" disabled>Love is...</button>
    </div>

    <div id="task1" class="container hidden">
        <h2>Love is to touch you.</h2>
        <p class="typewriter" data-text="Task 1: Time to touch each other üòè I want to capture your touch forever!"></p>
        <img src="task1.jpg" class="task-img">
        <button class="done-btn" onclick="completeTask(1)">Done</button>
    </div>

    <div id="task2" class="container hidden">
        <h2>Love is exploring the unknown together.</h2>
        <p class="typewriter" data-text="Task 2: We are leaving the house. We need to be at a secret place at 1:00 PM!"></p>
        <img src="task2.jpg" class="task-img">
        <button class="done-btn" onclick="completeTask(2)">Done</button>
    </div>

    <div id="task3" class="container hidden">
        <h2>Love is when you love her even when she doesn‚Äôt cook for you.</h2>
        <p class="typewriter" data-text="Task 3: Time to grab something delicious in a new place!"></p>
        <img src="task3.jpg" class="task-img">
        <button class="done-btn" onclick="completeTask(3)">Done</button>
    </div>

    <div id="finalPage" class="container hidden">
        <h2>Congratulations! You‚Äôve won the grand prize ‚Äî love of your lifeüòè</h2>
        <img src="final.jpg" class="task-img">
        <div id="timer">Calculating...</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        // –ß–µ—Ä–Ω—ã–µ —Å–µ—Ä–¥—Ü–∞
        const heartBg = document.getElementById('heartBg');
        for (let i = 0; i < 30; i++) {
            const heart = document.createElement('div');
            heart.classList.add('falling-heart');
            heart.innerHTML = 'üñ§';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
            heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
            heartBg.appendChild(heart);
        }

        // –®–ª–µ–π—Ñ
        document.addEventListener('mousemove', (e) => createCursorHeart(e.pageX, e.pageY));
        document.addEventListener('touchstart', (e) => createCursorHeart(e.touches[0].pageX, e.touches[0].pageY));
        function createCursorHeart(x, y) {
            const h = document.createElement('div');
            h.classList.add('cursor-heart'); h.innerHTML = '‚ù§Ô∏è';
            h.style.left = x + 'px'; h.style.top = y + 'px';
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 1000);
        }

        // –¢–µ–∫—Å—Ç
        function typeWriter(el) {
            const text = el.getAttribute('data-text');
            el.innerHTML = ''; let i = 0;
            function type() { if (i < text.length) { el.innerHTML += text.charAt(i); i++; setTimeout(type, 40); } }
            type();
        }

        // –£–ë–ï–ì–ê–Æ–©–ê–Ø –ö–ù–û–ü–ö–ê
        const noBtn = document.getElementById('noBtn');
        let isJumping = false; // flag to switch to fixed position

        function moveNo() {
            if (!isJumping) {
                isJumping = true;
                const rect = noBtn.getBoundingClientRect();
                noBtn.style.position = 'fixed';
                noBtn.style.left = rect.left + 'px';
                noBtn.style.top = rect.top + 'px';
                noBtn.style.transform = 'none';
            }

            const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
            const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);

            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
        }

        noBtn.addEventListener('mouseover', moveNo);
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo(); });

        // –ù–ê–í–ò–ì–ê–¶–ò–Ø
        document.getElementById('yesBtn').onclick = () => {
            confetti({ particleCount: 150, spread: 70 });
            setTimeout(() => {
                showPage('page2');
                typeWriter(document.querySelector('#page2 .typewriter'));
            }, 800);
        };

        function showPage(id) {
            document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function showTask(num) {
            showPage('task' + num);
            setTimeout(() => typeWriter(document.querySelector(`#task${num} .typewriter`)), 300);
        }

        function completeTask(num) {
            confetti({ particleCount: 50 });
            if (num < 3) {
                document.getElementById(`btnTask${num+1}`).disabled = false;
                showPage('page2');
            } else {
                showPage('finalPage');
                startTimer();
                setInterval(startTimer, 1000);
                confetti({ particleCount: 300, spread: 100 });
            }
        }

        function startTimer() {
            const startDate = new Date('2025-02-13T00:00:00'); 
            const now = new Date();
            const diff = now - startDate;
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const m = Math.floor((diff / (1000 * 60)) % 60);
            const s = Math.floor((diff / 1000) % 60);
            document.getElementById('timer').innerHTML = `Together for: ${d}d ${h}h ${m}m ${s}s ‚ù§Ô∏è`;
        }
    </script>
</body>
</html>
