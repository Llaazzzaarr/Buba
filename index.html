<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Bambi</title>
    <style>
        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: #000; color: white;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; touch-action: none;
        }

        .heart-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; background: #000; overflow: hidden;
        }

        .falling-heart {
            position: absolute; color: #222;
            user-select: none; pointer-events: none; z-index: 1;
        }

        .cursor-heart {
            position: fixed; color: #ff4d6d; pointer-events: none;
            z-index: 999; animation: fadeUp 1s forwards; font-size: 20px;
        }
        @keyframes fadeUp {
            to { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }

        .container {
            text-align: center; background: rgba(20, 20, 20, 0.9);
            padding: 20px; border-radius: 25px; backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 85%; max-width: 380px; z-index: 10;
            max-height: 90vh; overflow-y: auto; /* –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω—É—Ç—Ä–∏ */
        }

        .hidden { display: none !important; }
        h1, h2 { color: #ff4d6d; margin-bottom: 15px; font-size: 1.4rem; }
        
        button {
            padding: 12px; font-size: 1rem; border: none; border-radius: 12px;
            cursor: pointer; margin: 8px 0; font-weight: bold; width: 100%;
        }

        #yesBtn { background: #ff4d6d; color: white; width: auto; min-width: 100px; position: relative; z-index: 5; }
        #noBtn { 
            background: #444; color: #bbb; 
            position: fixed; width: auto; min-width: 80px; z-index: 20;
            transition: 0.1s ease; /* –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ */
        }

        .task-btn { background: transparent; border: 2px solid #ff4d6d; color: white; }
        .task-btn:disabled { border-color: #333; color: #555; }
        .done-btn { background: white; color: black; margin-top: 10px; }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ñ–æ—Ç–æ */
        .task-img { 
            width: 100%; 
            max-height: 250px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã */
            object-fit: cover; /* –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π */
            border-radius: 15px; 
            margin: 10px 0; 
            border: 1px solid #333; 
        }

        #timer { font-size: 1rem; color: #ff4d6d; margin-top: 15px; font-weight: bold; padding-bottom: 10px; }
    </style>
</head>
<body>

    <div class="heart-bg" id="heartBg"></div>

    <div id="page1" class="container">
        <h1>Will you be my valentine, Bambi?</h1>
        <div style="height: 120px; display: flex; justify-content: center; align-items: center;">
            <button id="yesBtn">Yes</button>
            <button id="noBtn">No</button>
        </div>
    </div>

    <div id="page2" class="container hidden">
        <h2 class="typewriter" data-text="To receive your main gift, you must complete 3 tasks:"></h2>
        <button id="btnTask1" class="task-btn" onclick="showTask(1)">Love is...</button>
        <button id="btnTask2" class="task-btn" onclick="showTask(2)" disabled>Love is...</button>
        <button id="btnTask3" class="task-btn" onclick="showTask(3)" disabled>Love is...</button>
    </div>

    <div id="task1" class="container hidden">
        <h2>Love is to touch you</h2>
        <p class="typewriter" data-text="Task 1: Time to touch each other üòè I want to capture your touch forever!"></p>
        <img src="task1.jpg" class="task-img">
        <button class="done-btn" onclick="completeTask(1)">Done</button>
    </div>

    <div id="task2" class="container hidden">
        <h2>Love is exploring the unknown together</h2>
        <p class="typewriter" data-text="Task 2: We‚Äôll have to leave the house. We need to be at a secret place at 1:00 PM!"></p>
        <img src="task2.jpg" class="task-img">
        <button class="done-btn" onclick="completeTask(2)">Done</button>
    </div>

    <div id="task3" class="container hidden">
        <h2>Love is when you love her even when she doesn‚Äôt cook for you.</h2>
        <p class="typewriter" data-text="How do you like my latest idea? Task 3: Time to grab something delicious in a place that‚Äôs new for you!"></p>
        <img src="task3.jpg" class="task-img">
        <button class="done-btn" onclick="completeTask(3)">Done</button>
    </div>

    <div id="finalPage" class="container hidden">
        <h2>Congratulations! You‚Äôve won the grand prize ‚Äî love of your lifeüòèüòèüòè</h2>
        <img src="final.jpg" class="task-img">
        <div id="timer">Calculating our magic...</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        // –ß–µ—Ä–Ω—ã–µ —Å–µ—Ä–¥—Ü–∞
        function createFallingHeart() {
            const heart = document.createElement('div');
            heart.classList.add('falling-heart');
            heart.innerHTML = 'üñ§';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.top = '-5vh';
            heart.style.fontSize = Math.random() * 20 + 15 + 'px';
            const duration = Math.random() * 5 + 5;
            heart.style.transition = `transform ${duration}s linear`;
            document.getElementById('heartBg').appendChild(heart);
            setTimeout(() => { heart.style.transform = `translateY(110vh) rotate(360deg)`; }, 50);
            setTimeout(() => { heart.remove(); }, duration * 1000);
        }
        setInterval(createFallingHeart, 400);

        // –®–ª–µ–π—Ñ
        document.addEventListener('mousemove', (e) => createCursorHeart(e.pageX, e.pageY));
        document.addEventListener('touchstart', (e) => createCursorHeart(e.touches[0].pageX, e.touches[0].pageY));
        function createCursorHeart(x, y) {
            const h = document.createElement('div');
            h.classList.add('cursor-heart');
            h.innerHTML = '‚ù§Ô∏è';
            h.style.left = x + 'px'; h.style.top = y + 'px';
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 1000);
        }

        // –¢–µ–∫—Å—Ç
        function typeWriter(el) {
            const text = el.getAttribute('data-text');
            el.innerHTML = '';
            let i = 0;
            function type() {
                if (i < text.length) { el.innerHTML += text.charAt(i); i++; setTimeout(type, 40); }
            }
            type();
        }

        // –ö–ù–û–ü–ö–ê NO (–¢–æ–ª—å–∫–æ —É–±–µ–≥–∞–Ω–∏–µ)
        const noBtn = document.getElementById('noBtn');
        function moveNo(e) {
            if(e) e.preventDefault();
            const padding = 60;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;
            const randomX = Math.max(padding, Math.random() * maxX);
            const randomY = Math.max(padding, Math.random() * maxY);
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
        }
        noBtn.addEventListener('mouseenter', moveNo);
        noBtn.addEventListener('touchstart', moveNo);

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        document.getElementById('yesBtn').onclick = () => {
            confetti({ particleCount: 150, spread: 70 });
            showPage('page2');
            setTimeout(() => typeWriter(document.querySelector('#page2 .typewriter')), 400);
        };

        function showPage(id) {
            document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function showTask(num) {
            showPage('task' + num);
            setTimeout(() => typeWriter(document.querySelector(`#task${num} .typewriter`)), 400);
        }

        function completeTask(num) {
            confetti({ particleCount: 50 });
            if (num < 3) {
                document.getElementById(`btnTask${num+1}`).disabled = false;
                showPage('page2');
            } else {
                showPage('finalPage');
                startTimer();
                setInterval(startTimer, 1000);
                confetti({ particleCount: 300, spread: 100 });
            }
        }

        function startTimer() {
            const startDate = new Date('2025-02-13T00:00:00'); 
            const now = new Date();
            const diff = now - startDate;
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const m = Math.floor((diff / (1000 * 60)) % 60);
            const s = Math.floor((diff / 1000) % 60);
            document.getElementById('timer').innerHTML = `Together for: ${d}d ${h}h ${m}m ${s}s ‚ù§Ô∏è`;
        }
    </script>
</body>
</html>
